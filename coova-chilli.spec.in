Summary:   Coova-Chilli is a Wireless LAN Access Point Controller
Name:      @PACKAGE@
Version:   1.0.8
Release:   1
URL:       http://coova.org/wiki/index.php/CoovaChilli
Source0:   %{name}-%{version}.tar.gz
License:   GPL
Group:     System Environment/Daemons
BuildRoot: %{_tmppath}/%{name}-root

%description 

Coova-Chilli is a fork of the ChilliSpot project - an open source captive
portal or wireless LAN access point controller. It supports web based login
(Universal Access Method, or UAM), standard for public HotSpots, and it
supports Wireless Protected Access (WPA), the standard for secure roamable
networks. Authentication, Authorization and Accounting (AAA) is handled by
your favorite radius server. Read more at http://coova.org/ and
http://www.chillispot.org/.

%prep
%setup 

%build

./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --enable-static-exec

make

%install

make install prefix=$RPM_BUILD_ROOT/usr sysconfdir=$RPM_BUILD_ROOT/etc localstatedir=$RPM_BUILD_ROOT/var 
strip $RPM_BUILD_ROOT/usr/sbin/chilli
strip $RPM_BUILD_ROOT/usr/sbin/chilli_response
strip $RPM_BUILD_ROOT/usr/sbin/chilli_radconfig
strip $RPM_BUILD_ROOT/usr/sbin/chilli_query
strip $RPM_BUILD_ROOT/usr/sbin/test_radius

rm -rf $RPM_BUILD_ROOT/usr/include/*
rm -rf $RPM_BUILD_ROOT/usr/lib/*

%clean
rm -rf $RPM_BUILD_ROOT
make clean

%post
/sbin/chkconfig --del chilli
/sbin/chkconfig --add chilli

%files
%defattr(-,root,root)

%attr(0644,root,root) /usr/man/man[158]/*

%dir %{_sysconfdir}/chilli
%dir %{_sysconfdir}/chilli/www

%attr(755, root, root) /usr/sbin/*
%attr(755, root, root) /etc/init.d/chilli

%doc doc/hotspotlogin.cgi
%doc doc/dictionary.chillispot
%doc COPYING AUTHORS INSTALL README ChangeLog 

%config /etc/chilli.conf
%config /etc/chilli/functions
%config /etc/chilli/defaults

%attr(644,root,root) %{_sysconfdir}/chilli/www/*
%attr(755, root, root) /etc/chilli/wwwsh
%attr(755, root, root) /etc/chilli/functions
%attr(755, root, root) /etc/chilli/*.sh
%attr(755, root, root) /etc/chilli/www/config.sh

%changelog
* Thu Sep 20 2007 <david@coova.com>
- 1.0.8 release (renamed)
* Thu Aug 20 2007 <david@coova.com>
- 1.0-coova.7 release
* Thu Jun 7 2007 <david@coova.com>
- 1.0-coova.6 release
* Wed May 16 2007  <david@coova.com>
- 1.0-coova.5 release
* Wed Feb 07 2007  <david@coova.com>
- 1.0-coova.4 release
* Wed Nov 15 2006  <david@coova.com>
- 1.0-coova.3 release
* Thu Mar 25 2004  <support@chillispot.org>
- Initial release.
